ME CAMERA SYSTEM v2.1 - COMPREHENSIVE SETUP & REFERENCE GUIDE
================================================================

DOCUMENT OVERVIEW
=================
This guide covers complete setup from fresh SD card to production-ready ME Camera 
system on Raspberry Pi (Zero 2W, 3B+, 4, or 5).

Quick Facts:
- Framework: Python 3.9+ with Flask 2.2.5
- OS: Raspberry Pi OS Bullseye (32-bit recommended)
- Target Audience: Developers and system administrators
- Status: Production-Ready (v2.1)
- GitHub: https://github.com/MangiafestoElectronicsLLC/ME_CAM-DEV
- Last Updated: January 15, 2026

SYSTEM REQUIREMENTS
===================
Hardware:
  â€¢ Raspberry Pi: Zero 2W (minimum), 3B+, 4, or 5 (recommended)
  â€¢ microSD Card: 32GB+ for full recording capability
  â€¢ Power Supply: USB-C 5V 2.5A (critical for Pi Zero 2W stability)
  â€¢ Network: WiFi or Ethernet connectivity
  â€¢ Optional: USB Battery pack, additional Pi for multi-device setup

Software Prerequisites:
  â€¢ Raspberry Pi Imager (for OS flashing)
  â€¢ SSH client (for remote access)
  â€¢ Git (for repository cloning)
  â€¢ Python 3.9+ (automatic in Bullseye)

PART 1: FRESH SD CARD INSTALLATION
===================================

STEP 1: OBTAIN & VERIFY SD CARD
---------------------------------
1. Obtain 32GB+ microSD card (UHS-II recommended for performance)
2. Test card on another device to verify it works
3. Clear any existing data if reusing card

STEP 2: DOWNLOAD RASPBERRY PI IMAGER
-------------------------------------
1. Go to https://www.raspberrypi.com/software/
2. Download Raspberry Pi Imager (choose your OS: Windows/Mac/Linux)
3. Install and launch the application

STEP 3: FLASH OS IMAGE
------------------------
âš ï¸  CRITICAL: Choose Bullseye, NOT Bookworm. Other versions incompatible.

1. Click "CHOOSE OS"
2. Navigate to: Raspberry Pi OS (Other) â†’ Raspberry Pi OS Lite (Bullseye)
3. Click "CHOOSE STORAGE" and select your microSD card
4. Click GEAR ICON (âš™ï¸) for Advanced Options:
   
   CONFIGURE THESE SETTINGS:
   â”œâ”€ Hostname: mecamera (or your preferred name)
   â”œâ”€ Enable SSH: YES (check "Use password authentication")
   â”œâ”€ Username: pi
   â”œâ”€ Password: [secure password - you'll use this frequently]
   â”œâ”€ Configure WiFi: Enter SSID and password
   â”œâ”€ WiFi country: [Your country code]
   â”œâ”€ Set locale settings: Timezone [UTC or your timezone]
   â””â”€ Disable telemetry: YES (for privacy)

5. Click "WRITE" and wait for completion (5-15 minutes)
6. When complete, safely eject the SD card from computer

STEP 4: FIRST BOOT
-------------------
1. Insert microSD card into Raspberry Pi
2. Connect power supply (USB-C for Pi Zero 2W, USB-C for others)
3. Wait 2-3 minutes for first boot to complete
4. Green LED should show activity, then stabilize

STEP 5: SSH CONNECTION & INITIAL SETUP
---------------------------------------
1. From computer, open terminal/command prompt
2. SSH into Pi:
   ssh pi@mecamera.local
   (Or use IP if hostname doesn't work: ssh pi@[IP-ADDRESS])

3. Password prompt appears - enter the password from Step 3

4. Update system (this takes 5-10 minutes):
   sudo apt update
   sudo apt upgrade -y

5. Install required packages:
   sudo apt install -y git python3-pip python3-venv

6. Verify Python version (should be 3.9+):
   python3 --version

PART 2: CRITICAL CONFIGURATION - LEGACY CAMERA DISABLING
========================================================

âš ï¸  WARNING: THIS STEP IS REQUIRED FOR ALL RASPBERRY PI MODELS
   Skipping this causes camera detection to fail on Pi 3B+/4/5

STEP 6: DISABLE LEGACY CAMERA MODE
------------------------------------
1. From SSH session, run:
   sudo raspi-config

2. Navigate to menu:
   â†’ Interfacing Options (or Interface Options)
   â†’ Camera
   â†’ Select: NO

3. After confirmation, continue in raspi-config to:
   â†’ Interfacing Options
   â†’ I2C
   â†’ Select: YES (enables battery monitoring)

4. Exit raspi-config (usually Tab to Finish or Ctrl+C)

5. When prompted "Would you like to reboot now?": Select YES

6. SSH connection will disconnect. Wait 30 seconds, then:
   ssh pi@mecamera.local
   (Log in again with same password)

7. Verify reboot completed:
   uptime
   (Should show system up for ~1 minute)

PART 3: PROJECT SETUP & DEPENDENCIES
====================================

STEP 7: CLONE REPOSITORY
------------------------
1. Change to home directory:
   cd ~

2. Clone ME Camera project:
   git clone https://github.com/MangiafestoElectronicsLLC/ME_CAM-DEV.git

3. Navigate to project:
   cd ME_CAM-DEV

4. Verify project structure:
   ls -la
   
   Should display:
   â”œâ”€ src/               (source code)
   â”œâ”€ web/               (Flask app)
   â”œâ”€ config/            (configuration)
   â”œâ”€ templates/         (HTML templates)
   â”œâ”€ main.py            (entry point)
   â”œâ”€ requirements.txt   (dependencies)
   â”œâ”€ hub.py             (multi-device hub)
   â”œâ”€ .gitignore         (git configuration)
   â””â”€ [other files...]

STEP 8: PYTHON VIRTUAL ENVIRONMENT
-----------------------------------
1. Create virtual environment:
   python3 -m venv venv

2. Activate virtual environment:
   source venv/bin/activate
   
   (You should see (venv) prefix in terminal)

3. Upgrade pip:
   pip install --upgrade pip

4. Upgrade setuptools:
   pip install --upgrade setuptools wheel

STEP 9: INSTALL DEPENDENCIES
----------------------------
1. Install from requirements.txt:
   pip install -r requirements.txt
   
   This installs:
   â€¢ Flask 2.2.5 (web framework)
   â€¢ Pillow 9.5.0 (image processing)
   â€¢ numpy 1.24.3 (numerical computing)
   â€¢ picamera2 (camera control)
   â€¢ google-auth-httplib2 (Google APIs)
   â€¢ google-api-python-client (Drive backup)
   â€¢ werkzeug (web utilities)
   â€¢ + 15 additional packages

2. Verify installation completed successfully (no errors shown)

3. Confirm core packages:
   python3 -c "import flask, picamera2, numpy; print('All packages OK')"
   
   Expected output: "All packages OK"

STEP 10: CONFIGURATION
----------------------
1. Copy default configuration:
   cp config/config_default.json config/config.json

2. Edit configuration file:
   nano config/config.json

3. Customize these key settings:
   {
     "device_name": "My Device",
     "device_id": "camera-001",
     "pi_model": "auto",
     "enable_battery": true,
     "battery_pin": 17,
     "enable_camera": true,
     "camera_fps": "auto",
     "enable_motion": true,
     "motion_threshold": 15,
     "enable_cloud": false,
     "remote_devices": []
   }

4. Save changes: Ctrl+X â†’ Y â†’ Enter

5. Verify configuration loaded:
   python3 -c "import json; print(json.load(open('config/config.json'))['device_name'])"

PART 4: SYSTEMD SERVICE SETUP
============================

STEP 11: INSTALL SERVICE FILE
------------------------------
1. Copy service file to systemd:
   sudo cp etc/systemd/system/mecamera.service /etc/systemd/system/

   If file doesn't exist, manually create:
   sudo nano /etc/systemd/system/mecamera.service
   
   Paste this content:
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   [Unit]
   Description=ME Camera Security System
   After=network-online.target
   Wants=network-online.target
   
   [Service]
   Type=simple
   User=pi
   WorkingDirectory=/home/pi/ME_CAM-DEV
   Environment="PATH=/home/pi/ME_CAM-DEV/venv/bin"
   ExecStart=/home/pi/ME_CAM-DEV/venv/bin/python main.py
   Restart=always
   RestartSec=10
   StandardOutput=journal
   StandardError=journal
   
   [Install]
   WantedBy=multi-user.target
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

2. Save and exit: Ctrl+X â†’ Y â†’ Enter

3. Reload systemd daemon:
   sudo systemctl daemon-reload

4. Verify service file loaded:
   sudo systemctl show mecamera
   (Should show Type=simple and other service properties)

STEP 12: ENABLE AUTO-START
---------------------------
1. Enable service for boot:
   sudo systemctl enable mecamera

2. Start service immediately:
   sudo systemctl start mecamera

3. Wait 3 seconds for startup:
   sleep 3

4. Check service status:
   sudo systemctl status mecamera
   
   Expected output:
   â— mecamera.service - ME Camera Security System
       Loaded: loaded (/etc/systemd/system/mecamera.service; enabled)
       Active: active (running)

5. View real-time logs:
   sudo journalctl -u mecamera -f
   
   Should show:
   [PI_DETECT] Detected: Raspberry Pi Zero 2W
   [BATTERY] GPIO monitoring enabled on pin 17
   [CAMERA] Camera system initialized
   [SERVER] Flask app starting on 0.0.0.0:8080

STEP 13: VERIFY WEB DASHBOARD ACCESS
--------------------------------------
1. Get Pi's IP address:
   hostname -I
   (Note the IP, usually like 192.168.x.x)

2. Open web browser and navigate to:
   http://[IP-ADDRESS]:8080
   OR
   http://mecamera.local:8080

3. Log in with default credentials:
   Username: admin
   Password: admin123

4. Verify dashboard displays:
   âœ“ "â— ONLINE" status (green indicator)
   âœ“ Device name from config.json
   âœ“ Battery percentage (0-100%)
   âœ“ Storage used and available
   âœ“ Recordings count
   âœ“ Camera stream or TEST MODE message

SUCCESS! Your ME Camera system is now running.

PART 5: PI ZERO 2W LITE MODE - LIGHTWEIGHT CAMERA SOLUTION
===========================================================

âš¡ NEW IN V2.1: LITE MODE FOR PI ZERO 2W!
=========================================

Standard ME Camera v2.1 uses ~400MB RAM (Flask + background services + motion detection).
Pi Zero 2W only has 512MB total, leaving insufficient memory for camera streaming.

SOLUTION: LITE MODE - Stripped down like your old Streamlit project!

LITE MODE Features:
â€¢ Minimal memory footprint: ~150MB (instead of ~400MB)
â€¢ Direct camera access: No background threads
â€¢ Essential features only: Camera, battery, storage
â€¢ HTTPS support: Still works with me_cam.com
â€¢ Auto-boot: Systemd service included
â€¢ Compatible: Works on ALL Pi models (not just Zero 2W)

Memory Comparison:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Component           â”‚ Standard     â”‚ LITE MODE    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Base OS             â”‚ 120MB        â”‚ 120MB        â”‚
â”‚ Python + Flask      â”‚ 80MB         â”‚ 50MB         â”‚
â”‚ Background services â”‚ 100MB        â”‚ 0MB          â”‚
â”‚ Motion detection    â”‚ 50MB         â”‚ 0MB          â”‚
â”‚ Multi-device poll   â”‚ 50MB         â”‚ 0MB          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ TOTAL               â”‚ ~400MB       â”‚ ~170MB âœ…    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Result: Pi Zero 2W can now display camera! (512MB - 170MB = 342MB available)

HOW TO INSTALL LITE MODE
=========================

OPTION A: Quick Install (Recommended for Pi Zero 2W)
-----------------------------------------------------
1. SSH into Pi:
   ssh pi@mecamera.local

2. Navigate to project:
   cd ~/ME_CAM-DEV

3. Run LITE MODE installer:
   chmod +x scripts/install_lite_mode.sh
   ./scripts/install_lite_mode.sh

4. Script will:
   âœ“ Detect Pi model
   âœ“ Install minimal dependencies
   âœ“ Configure lightweight service
   âœ“ Enable auto-boot
   âœ“ Start camera system

5. Access dashboard:
   http://[IP-ADDRESS]:8080
   OR
   https://me_cam.com:8080

OPTION B: Manual Installation
------------------------------
1. Activate virtual environment:
   cd ~/ME_CAM-DEV
   source venv/bin/activate

2. Install minimal dependencies:
   pip install Flask==2.2.5 Pillow==9.5.0 loguru==0.7.0

3. Install picamera2:
   sudo apt-get install -y python3-picamera2

4. Copy LITE MODE service:
   sudo cp etc/systemd/system/mecamera-lite.service /etc/systemd/system/

5. Enable and start:
   sudo systemctl daemon-reload
   sudo systemctl enable mecamera-lite
   sudo systemctl start mecamera-lite

6. Check status:
   sudo systemctl status mecamera-lite

LITE MODE vs STANDARD MODE
===========================

What's DISABLED in LITE MODE:
â€¢ Background motion detection thread
â€¢ Multi-device polling service
â€¢ Cloud upload background tasks
â€¢ Advanced storage management thread
â€¢ Fast motion detector continuous capture

What's STILL ENABLED in LITE MODE:
âœ“ Camera streaming (direct capture, ~20 FPS)
âœ“ Battery monitoring (on-demand)
âœ“ Storage statistics (on-demand)
âœ“ HTTPS/SSL support
âœ“ Domain name access (me_cam.com)
âœ“ Auto-boot service
âœ“ Web dashboard
âœ“ API endpoints

LITE MODE is perfect if you:
â€¢ Have Pi Zero 2W (512MB RAM)
â€¢ Want simple camera streaming
â€¢ Don't need motion detection running 24/7
â€¢ Want minimal memory footprint
â€¢ Need HTTPS and domain access

STANDARD MODE is better if you:
â€¢ Have Pi 3B+ or higher (1GB+ RAM)
â€¢ Need background motion detection
â€¢ Want multi-device monitoring
â€¢ Need cloud upload automation
â€¢ Want all features running simultaneously

SWITCHING BETWEEN MODES
========================

Switch to LITE MODE:
  sudo systemctl stop mecamera
  sudo systemctl disable mecamera
  sudo systemctl enable mecamera-lite
  sudo systemctl start mecamera-lite

Switch to STANDARD MODE:
  sudo systemctl stop mecamera-lite
  sudo systemctl disable mecamera-lite
  sudo systemctl enable mecamera
  sudo systemctl start mecamera

Check which mode is running:
  sudo systemctl status mecamera-lite
  sudo systemctl status mecamera

LITE MODE VERIFICATION
======================

1. Check service is running:
   sudo systemctl status mecamera-lite
   
   Should show:
   â— mecamera-lite.service - ME Camera Lite Mode
       Active: active (running)

2. Check memory usage:
   free -m
   
   Should show ~300MB+ available (Pi Zero 2W)

3. View logs:
   sudo journalctl -u mecamera-lite -n 30
   
   Should show:
   [SYSTEM] LITE MODE active
   [CAMERA] Lightweight camera initialized

4. Test dashboard:
   http://[IP-ADDRESS]:8080
   
   Should display:
   â€¢ "âš¡ LITE MODE" badge
   â€¢ Live camera feed (if camera detected)
   â€¢ Battery percentage
   â€¢ Storage statistics

HTTPS & DOMAIN SETUP (LITE MODE)
=================================

LITE MODE fully supports HTTPS and domain name access (me_cam.com)!

Follow PART 7 (HTTPS & DOMAIN SETUP) - same instructions apply.

Quick reminder:
1. Certificates automatically loaded from certs/
2. Access via: https://[IP-ADDRESS]:8080
3. Add to hosts file: [IP] me_cam.com
4. Access via: https://me_cam.com:8080

LITE MODE works identically to standard mode for HTTPS/domain access.

PART 6: MULTI-DEVICE SETUP
===========================

STEP 14: CONFIGURE SECONDARY CAMERA
------------------------------------
Set up additional Pi cameras on your network:

1. Repeat STEPS 1-13 on second Raspberry Pi
2. Give it unique device_id in config.json:
   "device_id": "camera-garage"  (instead of "camera-001")

3. On PRIMARY Pi, edit config.json:
   "remote_devices": [
     {
       "device_id": "camera-garage",
       "name": "Garage Camera",
       "hostname": "camera-garage.local",
       "ip_address": "192.168.1.50",
       "port": 8080,
       "enabled": true
     }
   ]

4. Restart primary Pi service:
   sudo systemctl restart mecamera

5. Access multi-device dashboard:
   Navigate to "ðŸ“¡ Devices" page
   All devices should appear with status, battery, storage

STEP 15: API ENDPOINTS FOR MULTI-DEVICE
-----------------------------------------
Test multi-device API endpoints:

List all devices:
curl http://127.0.0.1:8080/api/devices

Get primary device status:
curl http://127.0.0.1:8080/api/status

Get remote device status:
curl http://127.0.0.1:8080/api/devices/camera-garage/status

Get remote device battery:
curl http://127.0.0.1:8080/api/devices/camera-garage/battery

Get remote device storage:
curl http://127.0.0.1:8080/api/devices/camera-garage/storage

PART 7: HTTPS & DOMAIN SETUP (OPTIONAL)
======================================

STEP 16: ENABLE HTTPS
---------------------
Self-signed certificates provided in certs/ directory:

1. Verify certificates exist:
   ls -la certs/
   Should show: certificate.pem, private_key.pem

2. HTTPS automatically enabled in Flask
   Access via: https://mecamera.local:8080

3. Browser shows security warning (expected for self-signed)
   Click: "Advanced" â†’ "Proceed" or browser equivalent

STEP 17: DOMAIN NAME ACCESS
----------------------------
To access via https://me_cam.com:

Windows:
1. Open Notepad as Administrator
2. Edit: C:\Windows\System32\drivers\etc\hosts
3. Add line: [PI-IP-ADDRESS] me_cam.com
4. Save and close
5. Flush DNS: ipconfig /flushdns

Mac/Linux:
1. Open Terminal
2. Edit: sudo nano /etc/hosts
3. Add line: [PI-IP-ADDRESS] me_cam.com
4. Save: Ctrl+X â†’ Y â†’ Enter
5. Flush DNS: sudo dscacheutil -flushcache (Mac) or sudo resolvectl flush-caches (Linux)

Then access: https://me_cam.com:8080

PART 8: TROUBLESHOOTING
=======================

ISSUE: Service shows "inactive" or "failed"
--------------------------------------------
Step 1: Check service file exists
  ls -la /etc/systemd/system/mecamera.service
  (Should exist and show rw-r--r-- permissions)

Step 2: Check Python environment
  source /home/pi/ME_CAM-DEV/venv/bin/activate
  python3 -c "import flask; print('Flask OK')"
  
Step 3: Check for errors in logs
  sudo journalctl -u mecamera -n 50
  Look for "Error", "Traceback", "not found"

Step 4: Reload and restart
  sudo systemctl daemon-reload
  sudo systemctl restart mecamera
  sleep 3
  sudo systemctl status mecamera

ISSUE: Dashboard shows "OFFLINE" but Pi is responding
------------------------------------------------------
Step 1: Test API directly
  curl http://127.0.0.1:8080/api/status
  (Should return {"active": true, "timestamp": ...})

Step 2: Check port 8080 is listening
  sudo netstat -tlnp | grep 8080
  Should show: "LISTEN" status

Step 3: Check network connectivity
  hostname -I
  (Should show valid IP, not 127.0.0.1 only)

Step 4: Restart service
  sudo systemctl restart mecamera
  sleep 3
  curl http://127.0.0.1:8080/api/status

ISSUE: Battery shows 0% or incorrect percentage
-------------------------------------------------
Step 1: Verify GPIO connection
  Check physical wire connection to GPIO 17 and GND
  
Step 2: Test GPIO reading
  gpio readall | grep 17
  Should show GPIO 17 state
  
Step 3: Recalibrate battery
  Fully charge battery
  Unplug power (if using USB) to reset
  Then check percentage again
  
Step 4: Check battery enabled in config
  grep "enable_battery" config/config.json
  Should show: "enable_battery": true

ISSUE: Storage shows 0 bytes
------------------------------
Step 1: Check recordings directory exists
  ls -la ~/ME_CAM-DEV/recordings/
  Should show directory listing
  
Step 2: Check permissions
  ls -lad ~/ME_CAM-DEV/recordings/
  Should show: drwxr-xr-x (755 permissions)
  
Step 3: Check disk space
  df -h
  Should show space available on /home partition
  
Step 4: Test write permission
  touch ~/ME_CAM-DEV/recordings/test.txt
  rm ~/ME_CAM-DEV/recordings/test.txt
  (Should work without errors)

ISSUE: Web interface slow or freezing
--------------------------------------
Step 1: Check system resources
  top
  Press 'q' to exit
  Look for high CPU (>80%) or low memory (<50MB free)
  
Step 2: Check memory usage
  free -m
  Mem: [total] [used] [free]
  
Step 3: Restart service if needed
  sudo systemctl restart mecamera
  
Step 4: Check network connectivity
  ping 8.8.8.8
  (4 responses = good connection)

ISSUE: Can't access https://me_cam.com
----------------------------------------
Step 1: Verify hosts file edited (see STEP 17)
  Windows: type C:\Windows\System32\drivers\etc\hosts | findstr me_cam
  Mac/Linux: cat /etc/hosts | grep me_cam
  Should show: [IP] me_cam.com

Step 2: Flush DNS cache
  Windows: ipconfig /flushdns
  Mac: sudo dscacheutil -flushcache
  Linux: sudo resolvectl flush-caches

Step 3: Test DNS resolution
  nslookup me_cam.com (Windows)
  or
  dig me_cam.com (Mac/Linux)
  Should resolve to your Pi's IP

Step 4: Verify HTTPS certificate
  First access shows browser security warning
  Click "Advanced" â†’ "Proceed Anyway"
  Certificate is self-signed (expected)

PART 9: PRODUCTION CHECKLIST
============================

Pre-Deployment (Before Connecting to Network):
[ ] SD card flashed with Bullseye (verified)
[ ] SSH connection tested (can log in)
[ ] System updated (sudo apt upgrade complete)
[ ] Legacy camera disabled (raspi-config confirmed)
[ ] Project cloned successfully (git clone OK)
[ ] Virtual environment created (venv/ exists)
[ ] Dependencies installed (pip install complete)
[ ] Configuration customized (config.json edited)
[ ] Service file installed (systemd OK)
[ ] Service enabled and running (systemctl status OK)

Deployment Verification:
[ ] Web dashboard accessible (http://[IP]:8080)
[ ] Default login works (admin/admin123)
[ ] Device shows "ONLINE" (green indicator)
[ ] Battery displays correctly (if enabled)
[ ] Storage metrics accurate
[ ] HTTPS accessible (https://[IP]:8080)
[ ] Domain accessible (https://me_cam.com)
[ ] Multi-device setup complete (if applicable)
[ ] Logs show no errors (journalctl clean)

Post-Deployment Maintenance:
[ ] Set up automated backups (if using cloud)
[ ] Configure motion detection sensitivity
[ ] Test email/SMS alerts (if configured)
[ ] Monitor disk space weekly (df -h)
[ ] Check logs monthly (journalctl)
[ ] Update system regularly (apt update/upgrade)
[ ] Backup config.json to secure location
[ ] Document any custom configurations

PART 10: COMMON COMMANDS REFERENCE
==================================

SERVICE MANAGEMENT
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Start service:            sudo systemctl start mecamera
Stop service:             sudo systemctl stop mecamera
Restart service:          sudo systemctl restart mecamera
Check status:             sudo systemctl status mecamera
View logs (live):         sudo journalctl -u mecamera -f
View last 50 lines:       sudo journalctl -u mecamera -n 50
Enable auto-start:        sudo systemctl enable mecamera
Disable auto-start:       sudo systemctl disable mecamera

SYSTEM INFORMATION
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Get local IP:             hostname -I
Check hostname:           hostname
View active processes:    top (press 'q' to exit)
Check memory:             free -m
Check disk space:         df -h
Check uptime:             uptime
View OS info:             uname -a

PYTHON & ENVIRONMENT
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Activate venv:            source ~/ME_CAM-DEV/venv/bin/activate
Deactivate venv:          deactivate
Check Python version:     python3 --version
List installed packages:  pip list
Update all packages:      pip install --upgrade -r requirements.txt
Test specific package:    python3 -c "import flask; print('OK')"

API TESTING
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Test status:              curl http://127.0.0.1:8080/api/status
Check battery:            curl http://127.0.0.1:8080/api/battery
List devices:             curl http://127.0.0.1:8080/api/devices
Check storage:            curl http://127.0.0.1:8080/api/storage
Get recordings:           curl http://127.0.0.1:8080/api/recordings
Motion events:            curl http://127.0.0.1:8080/api/motion/events

FILE MANAGEMENT
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
List files:               ls -la
Navigate directory:       cd [path]
Show current path:        pwd
Edit file:                nano [filename]
View file content:        cat [filename]
Search in files:          grep -r "text" .
Disk usage by folder:     du -sh [folder]/*

PART 11: VERSION & SUPPORT INFORMATION
======================================

Current Version: 2.1 (Production Ready)
Release Date: January 15, 2026
Python: 3.9+ required
OS: Raspberry Pi OS Bullseye (32-bit)

Recent Changes (v2.1):
âœ“ Fixed battery display (correct percentage calculation)
âœ“ Fixed dashboard auto-refresh (5-second updates)
âœ“ Fixed navbar consistency (all pages)
âœ“ Fixed multi-device API responses
âœ“ Added Pi model auto-detection
âœ“ Added TEST MODE for limited hardware
âœ“ Comprehensive error messages
âœ“ Improved HTTPS support

Support Resources:
â€¢ GitHub Issues: https://github.com/MangiafestoElectronicsLLC/ME_CAM-DEV/issues
â€¢ Documentation: See docs/ folder for detailed guides
â€¢ Troubleshooting: See PART 8 above for common issues
â€¢ Config Reference: See config/config_default.json for all options

====================================================
ME Camera System v2.1 - Setup Complete Reference
Last Updated: January 15, 2026
Ready for Production Deployment
====================================================

PART 12: MOTION DETECTION & SMS ALERTS (NEW!)
==============================================

OVERVIEW
--------
Both main.py and main_lite.py now include:
  â€¢ Lightweight motion detection (processes every 5 frames)
  â€¢ SMS/Text message alerts for motion events
  â€¢ Persistent motion event logging (logs/motion_events.json)
  â€¢ Optional rate limiting to prevent SMS spam

MOTION DETECTION
----------------
Configuration (in config.json):
  "detection": {
    "sensitivity": 0.6,        # 0.0-1.0 (higher = more sensitive)
    "min_motion_area": 500     # Minimum pixels to trigger
  }

API Endpoints:
  â€¢ GET /api/motion/events     â†’ Get recent motion events
  â€¢ POST /api/motion/log       â†’ Manually log motion event

Memory Impact:
  â€¢ LITE MODE: ~5-10MB additional (total still ~150MB) âœ“

SMS ALERT SETUP (TWILIO - RECOMMENDED)
--------------------------------------
1. Go to https://www.twilio.com/console
2. Sign up for free trial (100+ messages/month)
3. Verify your phone number
4. Get phone number from Twilio
5. Copy Account SID, Auth Token, Twilio phone number
6. Edit config.json:

   {
     "notifications": {
       "sms": {
         "enabled": true,
         "provider": "twilio",
         "rate_limit_minutes": 5,
         "motion_threshold": 0.5,
         "phone_to": "+12125551234",
         "twilio": {
           "account_sid": "ACxxxxxxxxxxxxxxxx",
           "auth_token": "your_token_here",
           "phone_from": "+15550000123"
         }
       }
     }
   }

7. Restart service: sudo systemctl restart mecamera-lite

TESTING
-------
Manual test:
  curl -X POST http://localhost:8080/api/motion/log \
    -H 'Content-Type: application/json' \
    -d '{"type":"motion","confidence":0.9}'

Check events:
  curl http://localhost:8080/api/motion/events

DASHBOARD
---------
Motion events visible on main dashboard:
  â€¢ Shows 24-hour event count
  â€¢ Latest event timestamp & confidence
  â€¢ Auto-updates every 30 seconds

REFERENCE FILES
---------------
â€¢ src/core/sms_notifier.py       â†’ SMS provider logic
â€¢ src/core/motion_logger.py       â†’ Event persistence
â€¢ logs/motion_events.json         â†’ Event history
â€¢ logs/sms_sent.json              â†’ SMS send history
â€¢ web/app.py & web/app_lite.py   â†’ Integration

====================================================
ME Camera System v2.1+ - Motion & SMS Complete
Ready for Production with Alerts
====================================================